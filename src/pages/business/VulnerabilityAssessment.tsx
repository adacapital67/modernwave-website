
import { useRef, useEffect, useState } from "react";
import Navbar from "@/components/Navbar";
import Footer from "@/components/Footer";
import { Button } from "@/components/ui/button";
import { Link } from "react-router-dom";
import { ArrowRight, Scan, Search, FileSearch, BarChart, RefreshCw, ArrowLeft } from "lucide-react";

const VulnerabilityAssessment = () => {
  const sectionRef = useRef<HTMLDivElement>(null);
  const [activeStep, setActiveStep] = useState<number | null>(null);
  
  useEffect(() => {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("animate-slide-up", "opacity-100");
            entry.target.classList.remove("opacity-0", "translate-y-10");
          }
        });
      },
      { threshold: 0.1 }
    );

    if (sectionRef.current) {
      const elements = sectionRef.current.querySelectorAll(".animate-on-scroll");
      elements.forEach((el) => observer.observe(el));
    }

    return () => observer.disconnect();
  }, []);

  const processSteps = [
    {
      icon: Scan,
      title: "Discovery Phase",
      description: "This phase involves scanning systems to identify potential vulnerabilities. It includes network scans, application scans, and system reviews to detect both internal and external risks."
    },
    {
      icon: Search,
      title: "Vulnerability Identification",
      description: "Using advanced tools and techniques, vulnerabilities within your systems, such as outdated software, poor network configurations, and security loopholes, are identified."
    },
    {
      icon: BarChart,
      title: "Risk Assessment & Prioritization",
      description: "After identifying vulnerabilities, we assess the severity and potential impact. High-priority risks are addressed first to minimize business risks."
    },
    {
      icon: FileSearch,
      title: "Remediation & Fixing",
      description: "Remediation involves fixing vulnerabilities by patching systems, upgrading software, changing configurations, and enhancing security protocols."
    },
    {
      icon: RefreshCw,
      title: "Re-Testing & Continuous Monitoring",
      description: "Once the vulnerabilities are fixed, we perform re-tests to ensure that the issues have been resolved. Continuous monitoring ensures that new vulnerabilities are identified early."
    }
  ];

  return (
    <div className="min-h-screen flex flex-col bg-slate-900 text-white">
      <Navbar />
      
      <main className="flex-grow pt-16">
        {/* Hero Section */}
        <section className="bg-gradient-to-b from-red-900/50 to-slate-900 py-24" ref={sectionRef}>
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div className="text-center">
              <h1 className="text-4xl md:text-5xl font-bold font-display mb-6">
                Comprehensive Vulnerability Assessment
              </h1>
              <p className="text-xl text-gray-300 max-w-3xl mx-auto mb-8">
                Identify and fix weaknesses before attackers exploit them
              </p>
              <div className="flex flex-wrap gap-4 justify-center">
                <Button size="lg" className="gap-2 group bg-red-600 hover:bg-red-700" asChild>
                  <Link to="/consultation">
                    Get Security Assessment
                    <ArrowRight size={16} className="transition-transform duration-300 group-hover:translate-x-1" />
                  </Link>
                </Button>
                <Button size="lg" variant="outline" className="gap-2 group border-red-500 text-red-500 hover:bg-red-950/30" asChild>
                  <Link to="/business/cybersecurity">
                    <ArrowLeft size={16} className="transition-transform duration-300 group-hover:-translate-x-1" />
                    Back to Cybersecurity Page
                  </Link>
                </Button>
              </div>
            </div>
          </div>
        </section>
        
        {/* Introduction Section */}
        <section className="py-16 bg-slate-900">
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div className="max-w-3xl mx-auto text-center">
              <p className="text-lg text-gray-300">
                Our vulnerability assessment services help identify and fix security gaps in your systems before malicious actors can exploit them. By proactively discovering weaknesses in your network, applications, and infrastructure, we help prevent data breaches and cyberattacks that could harm your business. Regular vulnerability assessments are essential in addressing evolving threats and maintaining a strong security posture.
              </p>
            </div>
          </div>
        </section>
        
        {/* Service Process Section - Flowchart Style */}
        <section className="py-16 bg-slate-800">
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div className="text-center mb-16">
              <h2 className="text-3xl font-bold font-display mb-4">
                The Vulnerability Assessment Process
              </h2>
              <p className="text-lg text-gray-300 max-w-3xl mx-auto">
                Our systematic approach ensures comprehensive identification and remediation of vulnerabilities
              </p>
            </div>
            
            <div className="relative overflow-x-auto pb-8">
              {/* Connecting Line */}
              <div className="absolute top-1/2 left-0 right-0 h-1 bg-gradient-to-r from-red-900 via-red-600 to-red-900 transform -translate-y-1/2 z-0"></div>
              
              {/* Process Steps */}
              <div className="flex flex-nowrap md:justify-center space-x-6 min-w-max">
                {processSteps.map((step, index) => (
                  <div 
                    key={index}
                    className="relative z-10"
                    onMouseEnter={() => setActiveStep(index)}
                    onMouseLeave={() => setActiveStep(null)}
                  >
                    {/* Step Number Circle */}
                    <div className="w-16 h-16 rounded-full bg-slate-900 border-2 border-red-500 flex items-center justify-center mx-auto mb-4 relative z-10">
                      <span className="text-xl font-bold text-red-500">{index + 1}</span>
                    </div>
                    
                    {/* Card Content */}
                    <div className={`w-64 rounded-xl bg-slate-900 border border-slate-700 transition-all duration-300 ${
                      activeStep === index ? 'border-red-500 shadow-[0_0_15px_rgba(239,68,68,0.5)]' : 'hover:border-red-500/50'
                    }`}>
                      <div className="p-6">
                        <div className="w-12 h-12 rounded-lg bg-slate-800 text-red-500 flex items-center justify-center mb-4 mx-auto">
                          <step.icon size={24} />
                        </div>
                        <h3 className="text-xl font-semibold mb-3 text-center">{step.title}</h3>
                        
                        {/* Description (visible on hover) */}
                        <div className={`overflow-hidden transition-all duration-300 ${
                          activeStep === index ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'
                        }`}>
                          <p className="text-gray-300 text-sm mt-2">{step.description}</p>
                        </div>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
            
            {/* Mobile-friendly view instruction */}
            <div className="text-center text-gray-400 text-sm mt-4 md:hidden">
              Swipe left to see all steps
            </div>
          </div>
        </section>
        
        {/* Why It's Crucial Section */}
        <section className="py-16 bg-slate-900">
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div className="text-center mb-16">
              <h2 className="text-3xl font-bold font-display mb-4">
                Why is Vulnerability Assessment Crucial?
              </h2>
            </div>
            
            <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
              <div className="bg-slate-800 p-8 rounded-xl shadow-sm border border-slate-700 hover:border-red-500 hover:shadow-[0_0_15px_rgba(239,68,68,0.3)] transition-all duration-300">
                <h3 className="text-xl font-semibold mb-4 text-red-400">Proactive Protection</h3>
                <p className="text-gray-300">
                  Identifying vulnerabilities before attackers can exploit them helps to prevent breaches and costly downtime. This proactive approach significantly reduces the risk of successful cyber attacks and provides peace of mind.
                </p>
              </div>
              
              <div className="bg-slate-800 p-8 rounded-xl shadow-sm border border-slate-700 hover:border-red-500 hover:shadow-[0_0_15px_rgba(239,68,68,0.3)] transition-all duration-300">
                <h3 className="text-xl font-semibold mb-4 text-red-400">Data Integrity</h3>
                <p className="text-gray-300">
                  Prevents sensitive data from being exposed or stolen due to unpatched vulnerabilities. Maintaining data integrity is essential for customer trust and business reputation in today's data-driven environment.
                </p>
              </div>
              
              <div className="bg-slate-800 p-8 rounded-xl shadow-sm border border-slate-700 hover:border-red-500 hover:shadow-[0_0_15px_rgba(239,68,68,0.3)] transition-all duration-300">
                <h3 className="text-xl font-semibold mb-4 text-red-400">Regulatory Compliance</h3>
                <p className="text-gray-300">
                  Ensures compliance with industry standards and regulations (e.g., GDPR, HIPAA). Regular vulnerability assessments are often required by regulatory frameworks and can help avoid costly penalties for non-compliance.
                </p>
              </div>
            </div>
          </div>
        </section>
        
        {/* CTA Section */}
        <section className="py-16 bg-gradient-to-b from-slate-900 to-red-950/30">
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 className="text-3xl font-bold font-display mb-6">
              Ready to Secure Your Business?
            </h2>
            <p className="text-lg text-gray-300 mb-8 max-w-2xl mx-auto">
              Take the first step toward comprehensive vulnerability assessment and proactive security management.
            </p>
            <Button size="lg" className="gap-2 group bg-red-600 hover:bg-red-700" asChild>
              <Link to="/consultation">
                Get Security Assessment
                <ArrowRight size={16} className="transition-transform duration-300 group-hover:translate-x-1" />
              </Link>
            </Button>
          </div>
        </section>
      </main>
      
      <Footer />
    </div>
  );
};

export default VulnerabilityAssessment;
